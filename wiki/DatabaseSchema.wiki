#summary Defines the database schema
#labels Milestone-5.0

student
	* sid INTEGER PRIMARY KEY AUTOINCREMENT
	* login VARCHAR NOT NULL
	* firstname VARCHAR NOT NULL
	* lastname VARCHAR NOT NULL
	* enabled INTEGER NOT NULL DEFAULT 1
	* hascollab INTEGER NOT NULL DEFAULT 0
	* CONSTRAINT studentunique UNIQUE (login) ON CONFLICT IGNORE;
	
ta
	* tid INTEGER PRIMARY KEY AUTOINCREMENT
	* login VARCHAR NOT NULL
	* firstname VARCHAR NOT NULL
	* lastname VARCHAR NOT NULL
	* defaultgrader INTEGER NOT NULL DEFAULT 1
	* CONSTRAINT taunique UNIQUE (login) ON CONFLICT IGNORE;
	
blacklist
	* tid INTEGER NOT NULL; FOREIGN KEY(tid) REFERENCES ta(tid) ON DELETE CASCADE
	* sid INTEGER NOT NULL; FOREIGN KEY(sid) REFERENCES student(sid) ON DELETE CASCADE
	* CONSTRAINT tidsidunique UNIQUE (tid, sid) ON CONFLICT IGNORE
	
asgngroup
	* gpid INTEGER PRIMARY KEY AUTOINCREMENT
	* name VARCHAR NOT NULL
	* aid INTEGER NOT NULL
	* CONSTRAINT nameaidunique UNIQUE (aid, name) ON CONFLICT ROLLBACK

groupmember
	* gpid INTEGER NOT NULL; FOREIGN KEY(gpid) REFERENCES asgngroup(gpid) ON DELETE CASCADE
	* sid INTEGER NOT NULL; FOREIGN KEY(sid) REFERENCES student(sid) ON DELETE CASCADE
	* CONSTRAINT gpidsidunique UNIQUE (gpid, sid) ON CONFLICT IGNORE
	
gestatus
	* geid INTEGER NOT NULL
	* gpid INTEGER NOT NULL; FOREIGN KEY(gpid) REFERENCES asgngroup(gpid) ON DELETE CASCADE
	* handintime INTEGER
	* CONSTRAINT gpidgeidunique UNIQUE (geid, gpid) ON CONFLICT REPLACE

distribution
	* pid INTEGER NOT NULL
	* gpid INTEGER NOT NULL; FOREIGN KEY(gpid) REFERENCES asgngroup(gpid) ON DELETE CASCADE
	* tid INTEGER NOT NULL; FOREIGN KEY(tid) REFERENCES ta(tid) ON DELETE CASCADE
	* CONSTRAINT onegrader UNIQUE (gpid, pid) ON CONFLICT REPLACE
	* CONSTRAINT rowsunique UNIQUE (gpid, pid, tid) ON CONFLICT IGNORE
	
exemption
	* geid INTEGER NOT NULL
	* gpid INTEGER NOT NULL; FOREIGN KEY(gpid) REFERENCES asgngroup(gpid) ON DELETE CASCADE
	* note TEXT
	* CONSTRAINT gpidgeidunique UNIQUE (geid, gpid) ON CONFLICT REPLACE

extension
	* geid INTEGER NOT NULL
	* gpid INTEGER NOT NULL; FOREIGN KEY(gpid) REFERENCES asgngroup(gpid) ON DELETE CASCADE
	* ontime INTEGER NOT NULL
	* shiftdates INTEGER NOT NULL //shift early and late dates relative to new ontime date
	* note TEXT
	* CONSTRAINT gpidaidunique UNIQUE (gpid, aid) ON CONFLICT REPLACE

grade
	* pid INTEGER NOT NULL
	* gpid INTEGER NOT NULL; FOREIGN KEY(gpid) REFERENCES asgngroup(gpid) ON DELETE CASCADE
	* score DOUBLE
        * insync INTEGER NOT NULL; 
	* CONSTRAINT gpidpidunique UNIQUE (gpid, pid) ON CONFLICT REPLACE

flagged
	* pid INTEGER NOT NULL
	* gpid INTEGER NOT NULL; FOREIGN KEY(gpid) REFERENCES asgngroup(gpid) ON DELETE CASCADE
	* note TEXT
	
adjustpoints
	* aid INTEGER NOT NULL
	* sid INTEGER NOT NULL; FOREIGN KEY(sid) REFERENCES student(sid) ON DELETE CASCADE
	* note TEXT